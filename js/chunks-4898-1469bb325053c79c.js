try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c310b9f9-ddf0-4a29-b2e5-31f4ec061322",e._sentryDebugIdIdentifier="sentry-dbid-c310b9f9-ddf0-4a29-b2e5-31f4ec061322")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4898],{5823:(e,t,a)=>{a.d(t,{P:()=>l,z:()=>i});var n=a(54568),r=a(7620);let s=r.createContext(void 0),i=e=>{let[t,a]=r.useState();return r.useEffect(()=>{let e=()=>a(window.matchMedia("(pointer: coarse)").matches);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,n.jsx)(s,{value:t,...e})},l=()=>{let e=r.useContext(s);return null!=e&&e}},7790:(e,t,a)=>{a.d(t,{u:()=>i});var n=a(54568),r=a(48064);let s={4001:(0,n.jsx)(n.Fragment,{children:"You cancelled the action."}),9999:(0,n.jsx)(n.Fragment,{children:"An unknown error occurred."})},i=function(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=9999;if(e instanceof Error&&("MetaMask Tx Signature: User denied action signature."===e.message||"MetaMask Message Signature: User denied message signature."===e.message||"User rejected transaction by closing modal"===e.message||-1!==e.message.indexOf("User rejected the request.")))return{actionBlocked:!1,blocking:!1,error:s[4001],rawError:e,txAction:t};if(e instanceof r.bG&&"MetaMask Tx Signature: User denied transaction signature."===e.details)return{actionBlocked:!1,blocking:!1,error:s[4001],rawError:Error(e.details),txAction:t};if("object"==typeof e&&null!==e&&"code"in e&&"message"in e&&"number"==typeof e.code&&"string"==typeof e.message&&("MetaMask Tx Signature: User denied action signature."===e.message||"MetaMask Message Signature: User denied message signature."===e.message||"MetaMask Tx Signature: User denied transaction signature."===e.message))return{actionBlocked:!1,blocking:!1,error:s[4001],rawError:Error(e.message),txAction:t};try{if(e instanceof Error){let t=Number(e.message.split(": ")[1]);n=Number.isNaN(t)?9999:t}}catch(e){}let i=s[n];return i?{actionBlocked:!0,blocking:a,error:i,rawError:e instanceof Error?e:Error("Unknown error"),txAction:t}:{actionBlocked:!0,blocking:a,error:void 0,rawError:e instanceof Error?e:Error("Unknown error"),txAction:t}}},15459:(e,t,a)=>{a.d(t,{f:()=>s});var n=a(7620),r=a(35703);let s=()=>{let{signTypedDataAsync:e}=(0,r.v)();return n.useCallback(async t=>e(t),[e])}},23194:(e,t,a)=>{a.d(t,{AM:()=>l,Wv:()=>o,hl:()=>d});var n=a(54568),r=a(38360),s=a(7620),i=a(29768);let l=r.bL,o=r.l9;r.Mz;let d=s.forwardRef((e,t)=>{let{className:a,children:s,align:l="center",sideOffset:o=4,...d}=e;return(0,n.jsx)(r.ZL,{children:(0,n.jsxs)(r.UC,{align:l,className:(0,i.cn)("tw-relative tw-z-[500] tw-w-full tw-rounded-md tw-bg-alpha-white/80 tw-p-3 tw-text-xs tw-font-normal tw-text-tooltip tw-outline-none data-[state=open]:tw-animate-in data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=open]:tw-fade-in-0 data-[state=closed]:tw-zoom-out-95 data-[state=open]:tw-zoom-in-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2",a),ref:t,sideOffset:o,...d,children:[(0,n.jsx)("div",{className:"tw-absolute tw-inset-0 -tw-z-10 tw-rounded-md tw-backdrop-blur-2xl"}),s]})})});d.displayName=r.UC.displayName},25892:(e,t,a)=>{a.d(t,{j:()=>l});var n=a(54568),r=a(32629),s=a(77804),i=a(29768);function l(e){let{value:t,symbol:a,valueUsd:l,valueClassName:o,valueUsdClassName:d,forceNumberFlow:c,iconSize:u=16,hideIcon:w=!1}=e,m=Number(l),p=Number.isFinite(m)&&m>0;return(0,n.jsxs)("span",{className:"tw-flex tw-flex-col tw-items-end tw-gap-1 md:tw-flex-row-reverse md:tw-items-center",children:[(0,n.jsxs)("span",{className:(0,i.cn)("tw-flex tw-items-center tw-gap-1 tw-text-sm tw-font-medium tw-text-primary",o),children:[!w&&(0,n.jsx)(s.xz,{size:u,symbol:a}),(0,n.jsx)(r.G,{compact:!0,forceNumberFlow:c,symbol:a,value:t})]}),p&&(0,n.jsx)("span",{className:(0,i.cn)("tw-flex tw-items-center tw-gap-1 tw-text-xs tw-font-normal tw-text-tertiary",d),children:(0,n.jsx)(r.G,{forceNumberFlow:c,symbol:"USD",symbolClassName:"tw-mr-0",value:m})})]})}},27761:(e,t,a)=>{a.d(t,{w:()=>v});var n=a(54568),r=a(23194),s=a(67754),i=a(7620),l=a(29768);let o=s.Kq,d=s.bL,c=s.l9,u=i.forwardRef((e,t)=>{let{className:a,children:r,sideOffset:i=4,...o}=e;return(0,n.jsxs)(s.UC,{className:(0,l.cn)("tw-relative tw-z-[500] tw-w-full tw-overflow-hidden tw-rounded-md tw-bg-alpha-white/80 tw-p-3 tw-text-xs tw-font-normal tw-text-tooltip tw-outline-none tw-animate-in tw-fade-in-0 tw-zoom-in-95 data-[state=closed]:tw-animate-out data-[state=closed]:tw-fade-out-0 data-[state=closed]:tw-zoom-out-95 data-[side=bottom]:tw-slide-in-from-top-2 data-[side=left]:tw-slide-in-from-right-2 data-[side=right]:tw-slide-in-from-left-2 data-[side=top]:tw-slide-in-from-bottom-2",a),ref:t,sideOffset:i,...o,children:[(0,n.jsx)("div",{className:"tw-absolute tw-inset-0 -tw-z-10 tw-rounded-md tw-backdrop-blur-2xl"}),r]})});u.displayName=s.UC.displayName;var w=a(5823);let m=e=>(0,w.P)()?(0,n.jsx)(r.AM,{...e}):(0,n.jsx)(d,{...e}),p=e=>(0,w.P)()?(0,n.jsx)(r.Wv,{...e}):(0,n.jsx)(c,{...e}),f=e=>(0,w.P)()?(0,n.jsx)(r.hl,{...e,className:"tw-z-[10003] tw-max-w-xs tw-whitespace-normal tw-break-words tw-text-left tw-shadow-lg"}):(0,n.jsx)(u,{...e,className:(0,l.cn)("tw-z-[10003] tw-max-w-xs tw-whitespace-normal tw-break-words tw-text-left tw-shadow-lg",e.className)});var g=a(4451);function v(e){let{trigger:t,content:a,triggerProps:r={},contentProps:s={},asChild:i=!0,skipTouch:l=!1,onOpenChange:d}=e,c=(0,w.P)();return l&&c?t||(0,n.jsx)(g.A.info,{className:"tw-size-4"}):(0,n.jsx)(o,{children:(0,n.jsxs)(m,{delayDuration:0,onOpenChange:d,children:[(0,n.jsx)(p,{...r,asChild:i,children:t||(0,n.jsx)(g.A.info,{className:"tw-size-4"})}),a&&(0,n.jsx)(f,{...s,children:a})]})})}},30215:(e,t,a)=>{a.d(t,{A:()=>o,Q:()=>l});var n=a(60007),r=a(75597),s=a(7620),i=a(14884);let l=e=>{var t,a;let{chain:s,transport:i}=e,l={chainId:s.id,ensAddress:null==(a=s.contracts)||null==(t=a.ensRegistry)?void 0:t.address,name:s.name};if("fallback"===i.type){let e=i.transports.filter(e=>{let{value:t}=e;return null==t?void 0:t.url});if(0===e.length)return;return new n.S(e.map(e=>{let{value:t}=e;return new r.B(null==t?void 0:t.url,l)}))}if(i.url)return new r.B(i.url,l)},o=function(){let{chainId:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.t)({chainId:e});return s.useMemo(()=>t?l(t):void 0,[t])}},30387:(e,t,a)=>{a.d(t,{P:()=>n});var n=function(e){return e.APPROVAL="APPROVAL",e.MAIN_ACTION="MAIN_ACTION",e.GAS_ESTIMATION="GAS_ESTIMATION",e}({})},32629:(e,t,a)=>{a.d(t,{G:()=>d});var n=a(54568),r=a(54301),s=a(30787),i=a(29768);let l=["","K","M","B","T","P","E","Z","Y"];function o(e){let{value:t,visibleDecimals:a,roundDown:s,compactThreshold:i}=e,{prefix:o,postfix:d}=(e=>{let{value:t,visibleDecimals:a=2,roundDown:n,compactThreshold:s}=e,i=(0,r.cG)(t),o=i.toFixed(0).length;s&&Number(t)<=s&&(o=0);let d=Math.min(Math.floor(o?(o-1)/3:0),l.length-1),c=l[d],u=(0,r.I7)(i,3*d).toNumber();n&&(u=Math.trunc(Number(u)*10**a)/10**a);let w=new Intl.NumberFormat("en-US",{maximumFractionDigits:a,minimumFractionDigits:a}).format(u),m=w;if(w.includes(".")){let e=w.split("."),t=e[0]||"",a=e[1];(null==a?void 0:a.split("").every(e=>"0"===e))&&(m=t)}return{postfix:0===d?"":c,prefix:m}})({compactThreshold:i,roundDown:s,value:t,visibleDecimals:a});return(0,n.jsxs)(n.Fragment,{children:[o,d]})}function d(e){let{value:t,symbol:a,visibleDecimals:l,compact:d,percent:c,symbolClassName:u,roundDown:w,compactThreshold:m,forceSubscriptZeros:p,className:f,compactSymbol:g,forceNumberFlow:v,...h}=e,x=c?100*Number(t):Number(t),y=(null==a?void 0:a.toLowerCase())==="usd",b=null!=l?l:0;0===x?b=0:void 0===l&&(b=Math.abs(x)>=1||c||"USD"===a?2:7);let N=10**-b,j=0!==x&&Math.abs(x)<Math.abs(N),C=j&&!v?N:x,k=!1!==d&&(d||x>99999),A=(0,r.cG)(x).toString(),P=/^0\.00+/.test(A),[,I]=C.toString().split("."),E=!I,T=!!(I&&!Number(I)),O=E||T?0:b;w&&!k&&(C=Math.trunc(Number(C)*10**b)/10**b);let S=p||P&&!y,F=S?Math.max(1,b):O,L={maximumFractionDigits:O,minimumFractionDigits:E||T?0:Math.min(2,O)},R=S&&!k?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.001,n=parseFloat(e);if(Number.isNaN(n))return e;if(n>=a){let[a,n]=e.split(".");if(n){var r;let e=(null==(r=n.match(/^0+/))?void 0:r[0])||"";return"".concat(a,".").concat(e).concat(n.replace(e,"").slice(0,t))}return a}let s=e.match(/^0\.(0+)/);if(!s)return e;let i=s[1].length,l=e.slice(s[0].length),o=String(i).split("").map(e=>String.fromCharCode(8320+parseInt(e,10))).join("");return"0.0".concat(o).concat(l.slice(0,t))}(A,F):new Intl.NumberFormat("en-US",L).format(C),M=(null==a?void 0:a.toLowerCase())==="usd";return(0,n.jsxs)("span",{className:(0,i.cn)("tw-inline-flex tw-flex-row tw-items-center",f),...h,children:[j&&!S&&(0,n.jsx)("span",{className:(0,i.cn)("tw-mr-1",u),children:"<"}),M&&!c&&(0,n.jsx)("span",{className:(0,i.cn)(!M&&!g&&"tw-mr-1",u),children:"$"}),v?(0,n.jsx)(s.Ay,{format:L,isolate:!0,suffix:!M&&a?" ".concat(a):"",value:C}):k?(0,n.jsx)(o,{compactThreshold:m,roundDown:w,value:C,visibleDecimals:b}):R,c&&(0,n.jsx)("span",{className:(0,i.cn)("tw-ml-1",u),children:"%"}),!M&&void 0!==a&&!v&&(0,n.jsx)("span",{className:(0,i.cn)("tw-ml-1",u),children:a})]})}},33370:(e,t,a)=>{a.d(t,{BF:()=>s,Xw:()=>d,jm:()=>o});var n=a(54568),r=a(7620),s=function(e){return e.Slow="slow",e.Normal="normal",e.Fast="fast",e.Custom="custom",e}({});let i=r.createContext(void 0);function l(e,t){switch(t.type){case"setGasOption":return{customGas:e.customGas,gasOption:t.value};case"setCustomGasOption":return{customGas:t.value,gasOption:"custom"};default:throw Error("Unhandled action type: ".concat(t))}}let o=e=>{let{children:t}=e,[a,s]=r.useReducer(l,{customGas:"100",gasOption:"fast"});return(0,n.jsx)(i,{value:{dispatch:s,state:a},children:t})};function d(){let e=r.useContext(i);if(void 0===e)throw Error("useGasStation must be used within a GasStationProvider");return e}},35170:(e,t,a)=>{a.d(t,{WB:()=>g,ZZ:()=>f,zg:()=>p});var n=a(96654),r=a(50726),s=a(62491),i=a(86284),l=a(86957),o=a(97861),d=a(79924),c=a(25474),u=a(8332),w=a(62304),m=a(86640);let p=(0,c.Iz)(e=>{let{args:t,opts:a}=e;return(0,d.eU)(e=>{var r;let{spender:s,token:i}=t,l=null!=(r=a.amount)?r:n.$y,o=e(m.b5);return{abi:u.xw,account:o,address:i,args:[s,l],chain:a.chain,functionName:"approve"}})}),f=(0,c.Iz)(e=>{let{args:t,opts:a}=e;return(0,d.eU)(async e=>{let n=e(m.b5),d=e((0,w.vR)(a.chainId)),c=[l.kf.AAVE.UNDERLYING.toLowerCase(),l.kf.AAVE.A_TOKEN.toLowerCase(),o.FJ.toLowerCase()],{amount:u,deadline:p}=t,f="",g="1",v=t.token;if(c.includes(v.toLowerCase())){let e=new r.X(v,d),t=await e.getEip712Domain();f=t.name,g=t.version}else{let e=new s.u(d);f=(await e.getTokenData(v)).name}let{chainId:h}=await d.getNetwork(),x=new i._(d),y=await x.getNonce({owner:n,token:v});return{domain:{chainId:h,name:f,verifyingContract:v,version:g},message:{deadline:p,nonce:y,owner:n,spender:t.spender,value:u},primaryType:"Permit",types:{EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}],Permit:[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]}}})}),g=(0,c.Iz)(e=>{let{args:t,opts:a}=e;return(0,d.eU)(async e=>{let{underlyingAsset:n,amount:r,deadline:l}=t,o=e((0,w.vR)(a.chainId)),{chainId:d}=await o.getNetwork(),c=new s.u(o),{name:u}=await c.getTokenData(n),p=e(m.b5),f=new i._(o),g=await f.getNonce({owner:p,token:n});return{domain:{chainId:d,name:u,verifyingContract:n,version:"1"},message:{deadline:l,delegatee:t.spender,nonce:g,value:r},primaryType:"DelegationWithSig",types:{DelegationWithSig:[{name:"delegatee",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}],EIP712Domain:[{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"}]}}})})},36541:(e,t,a)=>{a.d(t,{N:()=>u});var n=a(54568),r=a(7620),s=a(615),i=a(40615),l=a(29768);let o=(0,s.F)("tw-relative tw-flex tw-w-full tw-gap-1.5 tw-rounded-xl tw-border tw-border-border tw-py-3 tw-pl-2 tw-pr-4",{defaultVariants:{variant:"default"},variants:{variant:{default:"tw-text-secondary [&>svg]:tw-bg-background-secondary",destructive:"tw-border-error-border tw-bg-utility-error-50 [&>svg]:tw-border-error-border",success:"tw-border-border-success tw-bg-utility-success-50 [&>svg]:tw-text-success",warning:"tw-border-border-warning tw-bg-utility-warning-50 [&>svg]:tw-text-warning-foreground"}}}),d=r.forwardRef((e,t)=>{let{alertClassName:a,variant:r,...s}=e;return(0,n.jsxs)("div",{className:(0,l.cn)(o({variant:r}),a),ref:t,role:"alert",...s,children:[(0,n.jsx)("div",{children:(0,n.jsx)(i.A,{variant:null!=r?r:"default"})}),(0,n.jsx)("div",{className:"tw-flex tw-w-full tw-items-center",children:s.children})]})});d.displayName="Alert",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("h5",{className:(0,l.cn)("tw-mb-1 tw-font-semibold tw-text-primary",a),ref:t,...r})}).displayName="AlertTitle";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,n.jsx)("div",{className:(0,l.cn)("tw-text-sm [&_p]:tw-leading-relaxed",a),ref:t,...r})});c.displayName="AlertDescription";let u=r.forwardRef((e,t)=>{let{children:a,className:r,...s}=e;return(0,n.jsx)(d,{ref:t,...s,children:(0,n.jsx)(c,{className:(0,l.cn)("",r),children:a})})});u.displayName="Warning"},38840:(e,t,a)=>{a.d(t,{N:()=>d});var n=a(54568),r=a(40160),s=a(60357),i=a(36541),l=a(47227),o=a(17680);let d=e=>{let t,{txError:a}=e,[,d]=(0,s.Cj)();return(0,n.jsxs)(i.N,{variant:"destructive",children:[(0,n.jsx)("span",{className:"tw-flex-1",children:a.error?a.error:"There was some error. Please try changing the parameters or"}),!a.hideCopy&&(0,n.jsx)(l.Button,{className:"tw-p-0 tw-text-xs tw-underline sm:tw-text-sm",onClick:(t=a.rawError.message.toString(),()=>{d(t).then(()=>{(0,o.o)({toastConfig:{title:"Error copied to clipboard",variant:"success"}})}).catch(e=>{(0,o.o)({toastConfig:{title:"Failed to copy error to clipboard",variant:"error"}}),r.Cp(e)})}),variant:"link",children:"Copy the error"})]})}},42648:(e,t,a)=>{a.d(t,{k:()=>c});var n=a(95257),r=a(7620),s=a(40476),i=a(15940),l=a(4323);async function o(e){var t,a;let{chainId:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{chain:r,transport:s}=await (0,l.r)(e,{chainId:n}),o={chainId:r.id,ensAddress:null==(a=r.contracts)||null==(t=a.ensRegistry)?void 0:t.address,name:r.name};return new i.j(s,o)}var d=a(59237);let c=()=>{let{chainId:e}=(0,s.F)();return r.useCallback(async t=>{let a=await o(d.$,{chainId:e});if(a){let{from:e,...r}=t,s=a.getSigner(e);return await s.sendTransaction({...r,value:r.value?n.gH.from(r.value):void 0})}throw Error("Error sending transaction. Provider not found")},[e])}},44097:(e,t,a)=>{a.d(t,{B:()=>i});var n=a(7620),r=a(76099),s=a(59237);let i=()=>n.useCallback(async e=>(0,r.n)(s.$,{hash:e,timeout:36e5}),[])},48454:(e,t,a)=>{a.d(t,{c:()=>O});var n=a(54568),r=a(54301),s=a(86202),i=a(51452),l=a(66733),o=a(60844),d=a(81981),c=a(92797),u=a(27761),w=a(36541),m=a(25892),p=a(4451),f=a(46752),g=a(67933),v=a(86389),h=a(13432),x=a(55206);let y=JSON.parse('[{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"description","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"version","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint80","name":"_roundId","type":"uint80"}],"name":"getRoundData","outputs":[{"internalType":"uint80","name":"roundId","type":"uint80"},{"internalType":"int256","name":"answer","type":"int256"},{"internalType":"uint256","name":"startedAt","type":"uint256"},{"internalType":"uint256","name":"updatedAt","type":"uint256"},{"internalType":"uint80","name":"answeredInRound","type":"uint80"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"latestRoundData","outputs":[{"internalType":"uint80","name":"roundId","type":"uint80"},{"internalType":"int256","name":"answer","type":"int256"},{"internalType":"uint256","name":"startedAt","type":"uint256"},{"internalType":"uint256","name":"updatedAt","type":"uint256"},{"internalType":"uint80","name":"answeredInRound","type":"uint80"}],"stateMutability":"view","type":"function"}]');var b=a(84007),N=a(33370),j=a(87680),C=a(93808),k=a(30215),A=a(10558),P=a(89303),I=a(29768),E=a(26080),T=a(32583);let O=e=>{var t,a;let{gasLimit:O,skipLoad:S,disabled:F,chainId:L}=e,{currentAccount:R,status:M}=(0,P.sA)(),{state:D}=(0,N.Xw)(),U=(0,c.i)(),_=null!=L?L:U,{isContractAddress:z}=(0,j.i)(R),B=(0,k.A)({chainId:_}),{data:G}=((e,t)=>{let a;return(a=[e],(0,b.E)({queries:a.map(e=>({queryFn:async()=>{let a=t;a||(a=(0,f.sO)(e));let n=await a.getFeeData(),r=(0,f.RY)(e);return{...(e=>{var t,a,n,r;let s={lastBaseFeePerGas:(null==(t=e.lastBaseFeePerGas)?void 0:t.toString())||"0",legacyGasPrice:(null==(a=e.gasPrice)?void 0:a.toString())||"0",maxFeePerGas:(null==(n=e.maxFeePerGas)?void 0:n.toString())||"0",maxPriorityFeePerGas:(null==(r=e.maxPriorityFeePerGas)?void 0:r.toString())||"0"};return{[N.BF.Slow]:s,[N.BF.Normal]:s,[N.BF.Fast]:s}})(n),isLegacyGas:r.isLegacyGas}},queryKey:v.$q.gasPrices(e),refetchInterval:3e4}))}))[0]})(_,B),{data:V,isLoading:q}=(e=>(0,g.I)({enabled:!!(0,f.RY)(e).chainlinkPriceFeed,queryFn:async()=>{let t=(0,f.RY)(e),a=t.chainlinkPriceFeed;if(!a)throw Error("No Chainlink price feed configured for chain ID: ".concat(e," (").concat(t.name,")"));if(a===i.L)return 0;let n=(0,f.sO)(e),r=new x.Contract(a.toLowerCase(),y,n);try{let[a,n]=await Promise.all([r.latestRoundData(),r.decimals()]);if(a.answer.lte(0))throw Error("Invalid price data: answer is zero or negative");let s=Math.floor(Date.now()/1e3),i=a.updatedAt.toNumber();if(s-i>86400){let a=new Date(1e3*i).toISOString();console.warn("Price data is stale for chain ".concat(e," (").concat(t.name,"). Last updated: ").concat(a))}let o=Number((0,l.formatUnits)(a.answer,n));if(o<=0||o>1e6)throw Error("Price seems unreasonable: $".concat(o));return o}catch(a){throw console.error("Error fetching Chainlink price for chain ".concat(e," (").concat(t.name,"):"),a),a}},queryKey:v.$q.chainlinkPriceFeed(e),refetchInterval:h.P.POLLING_INTERVAL,retry:3,retryDelay:e=>Math.min(1e3*2**e,3e4),staleTime:3e4}))(_),Y=(0,f.RY)(_),{name:H,baseAssetSymbol:W,baseAssetDecimals:$}=(0,f.RY)(_),K=(0,o.Xr)(T.b),X={address:d.Xd,chainId:_,decimals:$,extensions:{isNative:!0},logoURI:"",name:W,symbol:W},{data:Z,isLoading:J}=(0,C.e)([X],_,R),Q=(null==Z||null==(t=Z[0])?void 0:t.balance)||"0",ee=(0,r.S8)(new s.A(Q).shiftedBy($).toString(),$),et=V?(0,r.cG)(ee).multipliedBy(V.toString()).toNumber():0,{loadingTxns:ea}=(0,A.Fn)(),en=G&&!F?((e,t,a,n,s)=>{let i=(0,l.parseUnits)(a,"gwei").toString();if(t!==N.BF.Custom){let e=n[t];i=e.legacyGasPrice,"0"===e.maxFeePerGas||n.isLegacyGas||(i=e.maxFeePerGas)}let o=e.mul(i),d=(0,r.S8)(o.toString(),18),c=(0,r.cG)(d).multipliedBy(s).toNumber();return{gasBaseCurrency:Number(d),gasBaseCurrencyUsd:c}})(O,D.gasOption,D.customGas,G,null!=(a=null==V?void 0:V.toString())?a:"0"):void 0,er=void 0!==Y.chainlinkPriceFeed&&Y.chainlinkPriceFeed!==i.L,es=!F&&!z&&!J&&!q&&"authenticated"===M&&en&&et<en.gasBaseCurrencyUsd;return(0,n.jsxs)("div",{className:(0,I.cn)("tw-flex tw-w-full tw-flex-col tw-justify-start",es&&"tw-gap-4"),children:[(0,n.jsx)("div",{className:"tw-flex tw-justify-between",children:(0,n.jsxs)("div",{className:"tw-flex tw-w-full tw-items-start tw-justify-between tw-gap-1",children:[(0,n.jsxs)("span",{className:"tw-flex tw-items-center tw-gap-2 tw-text-sm tw-font-normal tw-text-tertiary",children:["Gas fee"," ",(0,n.jsx)(u.w,{content:"This gas calculation is only an estimation. Your wallet will set the price of the transaction. You can modify the gas settings directly from your wallet provider.",onOpenChange:e=>{e&&K({eventName:E.zm.VIEW_TOOLTIP,properties:{tooltip:"gas-fee-tooltip"}})},trigger:(0,n.jsx)(p.A.info,{className:"tw-size-4 tw-text-foreground-quaternary"})})]}),(0,n.jsx)("span",{className:"tw-flex tw-flex-col tw-items-end tw-gap-1",children:ea&&!S||q||J?(0,n.jsx)(p.A.refreshCcw,{className:"tw-size-4 tw-animate-spin tw-text-foreground-quaternary"}):en&&!F&&O.gt(0)?(0,n.jsx)(m.j,{symbol:W,value:en.gasBaseCurrency,valueUsd:er?en.gasBaseCurrencyUsd:void 0}):"-"})]})}),es&&(0,n.jsxs)(w.N,{className:"tw-mt-2",variant:"warning",children:["You do not have enough ",W," in your account to pay for transaction fees on ",H," network. Please deposit ",W," ","from another account."]})]})}},59237:(e,t,a)=>{a.d(t,{$:()=>C});var n,r=a(71601),s=a(54280),i=a(18718),l=a(87240),o=a(12815),d=a(90046),c=a(98766),u=a(85683),w=a(11985),m=a(46752),p=a(32305);let f=Object.values(m.km).map(e=>e.wagmiChain),g=Object.values(m._C).map(e=>e.wagmiChain),{name:v,baseAssetDecimals:h,baseAssetSymbol:x}=m.or[m.r_],y={id:m.pq,name:"".concat(v," Fork"),nativeCurrency:{decimals:h,name:x,symbol:x},rpcUrls:{default:{http:[m.z4]}},testnet:!1};m.P6&&(g=[y,...g]);let b={appDescription:p.C.description,appIcon:p.C.logo,appName:p.C.name,appUrl:p.C.url,enableFamily:!1,walletConnectProjectId:w.h.NEXT_PUBLIC_WALLET_CONNECT_ID},N=(0,s.Y8)({chains:m._N?f:g,transports:Object.fromEntries((m._N?f:g).map(e=>{var t;return[e.id,(0,i.N)([(0,l.L)(),...((null==(t=m.or[e.id])?void 0:t.publicJsonRPCUrl)||[]).map(e=>(0,l.L)(e,{retryCount:3,retryDelay:1e3,timeout:1e4})),(0,o.l)(d.b,{key:"injected",name:"Injected",retryCount:3,retryDelay:1e3})])]})),...b,ssr:!0}),j={chains:N.chains,emitter:new r.v("")},C=(0,c.Z)({...N,connectors:null==(n=N.connectors)?void 0:n.map(e=>"safe"===e(j).id?(0,u.g)({allowedDomains:[/gnosis-safe.io$/,/app.safe.global$/,/dhedge.org$/]}):e)})},62304:(e,t,a)=>{a.d(t,{FY:()=>p,vR:()=>m});var n=a(65738),r=a(95257),s=a(79924),i=a(25474),l=a(76640),o=a(46752),d=a(59237),c=a(30215),u=a(86640);let w=(0,i.Iz)(e=>(0,s.eU)(()=>(0,o.sO)(e))),m=(0,i.Iz)(e=>(0,s.eU)(t=>{let a,n=(0,l.K)(d.$);return void 0!==n&&(a=(0,c.Q)(n)),void 0===a&&(a=t(w(e))),a})),p=(0,i.Iz)(e=>(0,s.eU)(async t=>{let{tx:a,chainId:s,skipBuffer:i}=e,l=t(u.lr);if(s===n.nU.zksync&&l)return a;let o=t(m(s)),d=a.gasLimit?a.gasLimit:r.gH.from("0");delete a.gasLimit;let c=await o.estimateGas(a);return i||(c=c.mul(115).div(100)),a.gasLimit=c.gt(d)?c:d,a}))},70361:(e,t,a)=>{a.d(t,{v:()=>w});var n=a(54568),r=a(60844),s=a(8230),i=a(36541),l=a(47227),o=a(4451),d=a(46752),c=a(55087),u=a(90554);let w=e=>{let{event:t,requiredChainId:a}=e,{switchChain:w,isPending:m,isError:p}=(0,s.R)(),[,f]=(0,r.fp)(c.b),g=(0,d.RY)(a).name;return(0,n.jsx)(i.N,{className:"tw-flex tw-w-full tw-flex-col tw-items-start tw-justify-between tw-gap-1 md:tw-flex-row md:tw-items-center",variant:"destructive",children:p?(0,n.jsx)(n.Fragment,{children:"Seems like we can't switch the network automatically. Please check if you can change it from the wallet."}):(0,n.jsxs)(n.Fragment,{children:["Please switch to ",g,".",(0,n.jsxs)(l.Button,{className:"tw-flex tw-items-center tw-gap-2","data-pw":u.l.PRO.MARKET_SWITCHER.CHANGE_NETWORK_BUTTON,disabled:m,onClick:()=>{t&&f({...t,properties:{...t.properties,chainId:a,network:g}}),w({chainId:a})},size:"md",children:[m&&(0,n.jsx)(o.A.spinner,{className:"tw-size-4 tw-animate-spin"}),"Switch network"]})]})})}},70552:(e,t,a)=>{a.d(t,{L:()=>x,v:()=>h});var n=a(96654),r=a(86202),s=a(85892),i=a(60844),l=a(98283),o=a(78982),d=a(7790),c=a(15459),u=a(44097),w=a(10558),m=a(80023),p=a(35170),f=a(30387),g=a(26080),v=a(32583);let h="Signed correctly",x=e=>{let{usePermit:t,approvedAmount:a,signatureAmount:x,requiresApproval:y,decimals:b,amountToApprove:N,protocolAction:j,onApprovalTxConfirmed:C,onSignTxCompleted:k,chain:A}=e,{writeContractAsync:P}=(0,o.x)(),I=(0,c.f)(),E=(0,u.B)(),{approvalTxState:T,setApprovalTxState:O,setTxError:S}=(0,w.Fn)(),[,F]=(0,i.fp)(v.b),L=void 0!==N?new r.A(N).shiftedBy(b).decimalPlaces(0):new r.A(n.$y);return{approval:async()=>{try{if(y&&a)if(t){O({...T,loading:!0});let e=Math.floor(Date.now()/1e3+3600).toString(),t=await m.M.get((0,p.ZZ)({args:{...a,amount:"-1"===x?s.Is.toString():(0,l.X)(x,b).toString(),deadline:e},opts:{chainId:A.id}})),n=await I(t);k&&k({amount:x,deadline:e,signature:n}),S(void 0),O({loading:!1,success:!0,txHash:h}),F({eventName:g.zm.TOKEN_APPROVAL,properties:{amount:"-1"===x?s.Is.toString():(0,l.X)(x,b).toString(),deadline:e,delegatee:a.spender,token:a.token,txHash:h,type:j,usePermit:!0}})}else{let e=m.M.get((0,p.zg)({args:a,opts:N?{amount:L.toString(),chain:A}:{chain:A}}));O({...T,loading:!0});let t=await P(e),n=await E(t);O({loading:!1,success:!0,txHash:n.transactionHash}),S(void 0),C&&C(),F({eventName:g.zm.TOKEN_APPROVAL,properties:{amount:L.toString(),delegatee:a.spender,token:a.token,txHash:n.transactionHash,type:j,usePermit:!1}})}}catch(t){let e=(0,d.u)(t,f.P.GAS_ESTIMATION,!1);S(e),O({loading:!1,txHash:void 0}),F({eventName:g.zm.TOKEN_APPROVAL_FAILED,properties:{amount:L.toString(),delegatee:null==a?void 0:a.spender,error:e.rawError,token:null==a?void 0:a.token,type:j}})}}}}},80603:(e,t,a)=>{a.d(t,{Xi:()=>d,av:()=>c,j7:()=>o,tU:()=>l});var n=a(54568),r=a(70649),s=a(7620),i=a(29768);let l=r.bL,o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.B8,{className:(0,i.cn)("tw-inline-flex tw-items-center tw-justify-center tw-divide-x tw-rounded-md tw-border tw-border-border tw-bg-transparent",a),ref:t,...s})});o.displayName=r.B8.displayName;let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.l9,{className:(0,i.cn)("tw-inline-flex tw-items-center tw-justify-center tw-whitespace-nowrap tw-px-4 tw-py-2 tw-text-sm tw-font-semibold tw-text-secondary tw-transition-all first:tw-rounded-l-md last:tw-rounded-r-md data-[state=active]:tw-bg-background-brand data-[state=active]:tw-text-black hover:tw-bg-background-hover hover:tw-text-secondary-hover data-[state=active]:hover:tw-bg-background-brand data-[state=active]:hover:tw-text-black focus-visible:tw-bg-background-brand focus-visible:tw-outline-none disabled:tw-pointer-events-none disabled:tw-text-disabled",a),ref:t,...s})});d.displayName=r.l9.displayName;let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,n.jsx)(r.UC,{className:(0,i.cn)("tw-mt-2 tw-ring-offset-background focus-visible:tw-outline-none focus-visible:tw-ring-2 focus-visible:tw-ring-offset-2",a),ref:t,...s})});c.displayName=r.UC.displayName},91864:(e,t,a)=>{a.d(t,{dD:()=>n.dD,po:()=>n.po,v2:()=>n.v2});var n=a(54448)},93808:(e,t,a)=>{a.d(t,{e:()=>c});var n=a(56005),r=a(67933),s=a(86389),i=a(13432),l=a(80277),o=a(46752),d=a(30215);let c=(e,t,a)=>{let c=(0,d.A)({chainId:t});return(0,r.I)({enabled:e.length>0&&void 0!==a,queryFn:async()=>{let r=c||(0,o.sO)(t),s=e.filter(e=>{var t;return!(null==(t=e.extensions)?void 0:t.isNative)}),i=e.find(e=>{var t;return null==(t=e.extensions)?void 0:t.isNative}),d=new l.q({ethersProvider:r,multicallCustomContractAddress:"0xcA11bde05977b3631167028862bE2a173976CA11",tryAggregate:!0}),u=s.map(e=>({abi:[{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],stateMutability:"view",type:"function"}],calls:[{methodName:"balanceOf",methodParameters:[a],reference:"balanceOfCall"}],contractAddress:e.address,reference:e.address}));if(!i){let{results:t}=await d.call(u);return e.map(e=>{var a,r,s,i;return{...e,balance:(0,n.formatUnits)(null!=(i=null==(s=t[e.address])||null==(r=s.callsReturnContext)||null==(a=r.at(0))?void 0:a.returnValues.at(0))?i:"0",e.decimals)}}).sort((e,t)=>Number(t.balance)-Number(e.balance))}if(!a)return[];let[w,m]=await Promise.all([r.getBalance(a),d.call(u)]);return e.map(e=>{var t;return{...e,balance:(null==(t=e.extensions)?void 0:t.isNative)?(0,n.formatUnits)(w,e.decimals):(0,n.formatUnits)(m.results[e.address].callsReturnContext[0].returnValues[0],e.decimals)}}).sort((e,t)=>Number(t.balance)-Number(e.balance))},queryKey:s.$q.tokensBalance(e,t,a||""),refetchInterval:i.P.POLLING_INTERVAL})}},97685:(e,t,a)=>{a.d(t,{h:()=>E});var n=a(54568),r=a(7620),s=a(60844),i=a(80603),l=a(10558),o=a(91864),d=a(90554);let c=[{label:o.dD.PERMIT,method:"permit"},{label:o.dD.APPROVE,method:"approve"}];function u(e){let{currentMethod:t,setMethod:a}=e,{setTxError:r}=(0,l.Fn)();return(0,n.jsx)(i.tU,{className:"tw-w-full sm:tw-w-fit",value:t,children:(0,n.jsx)(i.j7,{className:"tw-flex","data-pw":d.l.PRO.MODAL.APPROVE.LIST,children:c.map(e=>(0,n.jsx)(i.Xi,{className:"tw-flex-1","data-pw":"".concat(d.l.PRO.MODAL.APPROVE.APPROVE_METHOD,"_").concat(e.method),onClick:()=>{a(e.label),r(void 0)},value:e.label,children:e.label},e.label))})})}var w=a(4451),m=a(5023),p=a(70552),f=a(87680),g=a(89303),v=a(26080),h=a(55087),x=a(40009);let y=e=>{let{approvalHash:t,symbol:a,tryPermit:i}=e,{currentAccount:l}=(0,g.sA)(),[d]=(0,s.fp)(x.df),[,c]=(0,s.fp)(h.b),[y,b]=(0,s.fp)((0,o.v2)(l)),{isContractAddress:N}=(0,f.i)(l),j=i&&y,C=t===p.v,k=d.explorerLinkBuilder({tx:t});return(r.useEffect(()=>{N&&y===o.dD.PERMIT&&b(o.dD.APPROVE)},[N,y,b]),t||C||!i)?t&&!j?(0,n.jsx)("div",{className:"tw-flex tw-items-center tw-justify-start tw-pb-1",children:t&&(0,n.jsxs)(m.N,{className:"tw-inline-flex tw-items-center",href:k,onClick:()=>{c({eventName:v.zm.VIEW_EXPLORER,properties:{funnel:"right-helper",link:k}})},rel:"noreferrer noopener",target:"_blank",children:["Review approval tx details",(0,n.jsx)(w.A.externalLink,{className:"tw-ml-2 tw-text-xs"})]})}):null:(0,n.jsxs)("div",{className:"tw-flex tw-w-full tw-flex-col tw-gap-1 tw-pb-1 tw-text-tertiary sm:tw-flex-row sm:tw-items-center sm:tw-justify-between",children:["Approve ",a," with",(0,n.jsx)(u,{currentMethod:y,setMethod:b})]})};var b=a(27761),N=a(8960),j=a(29768);let C=()=>{let e=(0,s.Xr)(N.bL);return(0,n.jsx)(b.w,{content:(0,n.jsxs)(n.Fragment,{children:["To continue, you need to grant WLFI smart contracts permission to move your funds from your wallet. Depending on the asset and wallet you use, it is done by submitting an approval transaction (requires gas)."," ",(0,n.jsx)(m.N,{href:"https://eips.ethereum.org/EIPS/eip-2612",onClick:()=>{e({eventName:v.zm.EXTERNAL_LINK,properties:{funnel:"approval-tooltip",link:"https://eips.ethereum.org/EIPS/eip-2612",type:"EIP-2612"}})},rel:"noopener noreferrer noindex nofollow",target:"_blank",children:"Learn more"})]}),contentProps:{className:(0,j.cn)("tw-cursor-auto"),onClick:e=>e.stopPropagation()},onOpenChange:()=>{e({eventName:v.zm.VIEW_TOOLTIP,properties:{tooltip:"approval-tooltip"}})}})};var k=a(38840),A=a(47227),P=a(30387),I=a(10042);let E=e=>{let{actionInProgressText:t,actionText:a,amount:s,approvalTxState:i,handleApproval:o,handleAction:d,isWrongNetwork:c,mainTxState:u,preparingTransactions:m,approvedAmount:p,requiresAmount:f,requiresApproval:v,symbol:h,blocked:x,fetchingData:b=!1,errorParams:N,tryPermit:E,buttonClassName:T,terms:O,className:S}=e,{txError:F}=(0,l.Fn)(),{readOnlyMode:L}=(0,g.sA)(),[R,M]=r.useState(!1),D=v&&(null==F?void 0:F.txAction)===P.P.APPROVAL&&F.actionBlocked,U=f&&f&&0===Number(s),_=void 0,{content:z,disabled:B,loading:G,handleClick:V}=x?{content:a,disabled:!0}:((null==F?void 0:F.txAction)===P.P.GAS_ESTIMATION||(null==F?void 0:F.txAction)===P.P.MAIN_ACTION)&&F.actionBlocked?N||{content:a,disabled:!0,loading:!1}:c?{content:(0,n.jsx)(n.Fragment,{children:"Wrong Network"}),disabled:!0}:b?{content:(0,n.jsx)(n.Fragment,{children:"Fetching data..."}),disabled:!0}:U?{content:(0,n.jsx)(n.Fragment,{children:"Enter an amount"}),disabled:!0}:m?{disabled:!0,loading:!0}:u.loading?{content:t,disabled:!0,loading:!0}:!v||(null==i?void 0:i.success)?{content:a,handleClick:d}:{content:a,disabled:!0},q=!v||c||U||m||D||v&&p>0&&void 0!==_?null:(null==i?void 0:i.loading)?{content:(0,n.jsxs)(n.Fragment,{children:["Approving ",h,"..."]}),disabled:!0,loading:!0}:(null==i?void 0:i.success)?{content:(0,n.jsxs)(n.Fragment,{children:["Approve Confirmed",(0,n.jsx)(w.A.checkCircle,{className:"tw-ml-2 tw-size-5"})]}),disabled:!0}:{content:(0,n.jsxs)("span",{className:"tw-flex tw-items-center tw-gap-2",children:["Approve ",h," to continue ",(0,n.jsx)(C,{})]}),handleClick:o},Y=!q||q.disabled||x||L||q.loading,H=v&&p>0&&void 0!==_,W=B||x||H||L||G||void 0===V,$=(null==i?void 0:i.txHash)!==void 0||E,K=void 0!==O&&(null==O?void 0:O.accepted)===!1,X=null==O?void 0:O.dialog;return(0,n.jsxs)("div",{className:(0,j.cn)("tw-flex tw-w-full tw-flex-col tw-gap-2 tw-pb-4",S),"data-pw":I.l.MODAL.ACTIONS_WRAPPER,children:[q&&$&&!1===L&&(0,n.jsx)("div",{className:"tw-flex tw-items-center tw-justify-end",children:(0,n.jsx)(y,{approvalHash:null==i?void 0:i.txHash,symbol:h,tryPermit:E})}),H&&(0,n.jsx)(k.N,{txError:{actionBlocked:!0,blocking:!0,error:(0,n.jsxs)(n.Fragment,{children:["You've already set an allowance for ",p," USDT. To change the amount, you need to first set the allowance to zero before approving the new amount. This is required to prevent any issues during the process.",o&&(0,n.jsx)(A.Button,{onClick:()=>void o(),children:"Click here to reset allowance back to 0"})]}),hideCopy:!0,rawError:Error("You must set the USDT allowance to 0 first, then approve the new amount."),txAction:P.P.APPROVAL}}),q&&!1===L&&(0,n.jsxs)(A.Button,{className:(0,j.cn)("tw-flex tw-w-full tw-items-center tw-gap-4",T),"data-pw":I.l.MODAL.APPROVE_BUTTON,disabled:Y,onClick:e=>{if(!(e.target instanceof Element&&(e.target.closest("#approval-tooltip")||e.target.closest("#approval-tooltip-text")))){if(K)return void M(!0);q.handleClick&&q.handleClick()}},size:"lg",spanClassName:"tw-w-full",children:[q.loading&&(0,n.jsx)(w.A.spinner,{className:"tw-size-4 tw-animate-spin"}),q.content]}),!q&&(0,n.jsx)(A.Button,{className:(0,j.cn)("tw-flex tw-w-full tw-items-center tw-gap-4",T),"data-pw":I.l.MODAL.ACTION_BUTTON,disabled:W,onClick:()=>{if(K)return void M(!0);null==V||V()},size:"lg",spanClassName:"tw-w-full",children:L?a:(0,n.jsxs)(n.Fragment,{children:[G&&(0,n.jsx)(w.A.spinner,{className:"tw-size-4 tw-animate-spin"}),z]})}),L&&(0,n.jsx)("span",{className:"tw-mt-2 tw-w-full tw-text-center tw-text-xs tw-text-warning",children:"Read-only mode. Connect to a wallet to perform transactions."}),void 0!==X&&(0,n.jsx)(X,{action:(null==q?void 0:q.handleClick)?()=>{var e;null==(e=q.handleClick)||e.call(q)}:()=>void(null==V||V()),open:R,setOpenChange:M})]})}}}]);